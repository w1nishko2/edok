# ‚úÖ –ú–ò–ì–†–ê–¶–ò–Ø –ü–ê–†–°–ï–†–û–í –ó–ê–í–ï–†–®–ï–ù–ê –£–°–ü–ï–®–ù–û!

## üìÖ –î–∞—Ç–∞: 5 –Ω–æ—è–±—Ä—è 2025 –≥.

---

## üéØ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞

### 1. RecipeListParserService.php ‚úÖ 100%

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- ‚úÖ –ë–∞–∑–æ–≤—ã–π URL: `https://food.ru`
- ‚úÖ –ü–∞–≥–∏–Ω–∞—Ü–∏—è: –ø–µ—Ä–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ë–ï–ó `?page=1`, —Å–æ –≤—Ç–æ—Ä–æ–π - `?page=2`
- ‚úÖ –°–µ–ª–µ–∫—Ç–æ—Ä —Å—Å—ã–ª–æ–∫: `//a[contains(@class, "card_cardLink")]/@href`
- ‚úÖ –†–µ—Ü–µ–ø—Ç–æ–≤ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ: 40 (–Ω–µ 48)
- ‚úÖ –ö–∞—Ç–µ–≥–æ—Ä–∏–∏: 11 –∫–∞—Ç–µ–≥–æ—Ä–∏–π food.ru

**–†–µ–∑—É–ª—å—Ç–∞—Ç —Ç–µ—Å—Ç–∞:**
```
‚úÖ –°—Ç—Ä–∞–Ω–∏—Ü–∞ 1: 40 —Ä–µ—Ü–µ–ø—Ç–æ–≤
‚úÖ –°—Ç—Ä–∞–Ω–∏—Ü–∞ 2: 40 —Ä–µ—Ü–µ–ø—Ç–æ–≤
```

---

### 2. RecipeParserService.php ‚úÖ 100%

**–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:**
- ‚úÖ –ö–æ–¥–∏—Ä–æ–≤–∫–∞ UTF-8: –¥–æ–±–∞–≤–ª–µ–Ω `<?xml encoding="UTF-8">` –≤ loadHTML()
- ‚úÖ **–í–ê–ñ–ù–û**: –∞—Ç—Ä–∏–±—É—Ç—ã —Å **–º–∞–ª–µ–Ω—å–∫–æ–π** –±—É–∫–≤—ã –ø–æ—Å–ª–µ loadHTML(): `itemprop`, `itemtype`

**–û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã:**

#### ‚úÖ parseTitle()
- XPath: `//h1`
- –†–µ–∑—É–ª—å—Ç–∞—Ç: "–°–∞–ª–∞—Ç ¬´–û—Å–µ–Ω–Ω–∏–π –¥–µ–Ω—å¬ª —Å —Ç–æ–ø–∏–Ω–∞–º–±—É—Ä–æ–º" ‚úÖ

#### ‚úÖ parseDescription()
- XPath: `//meta[@name="description"]/@content` –∏–ª–∏ `itemprop="description"`

#### ‚úÖ parseIngredients() üî•
- XPath: `//tr[@itemprop="recipeIngredient"]`
- –°—Ç—Ä—É–∫—Ç—É—Ä–∞:
  ```html
  <tr itemprop="recipeIngredient">
    <span class="name">–ù–∞–∑–≤–∞–Ω–∏–µ</span>
    <span class="value">200</span>
    <span class="type">–≥</span>
  </tr>
  ```
- –†–µ–∑—É–ª—å—Ç–∞—Ç: **7 –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–æ–≤** –Ω–∞–π–¥–µ–Ω–æ ‚úÖ

#### ‚úÖ parseSteps() üî•
- XPath: `//*[@itemtype="https://schema.org/HowToStep"]`
- –¢–µ–∫—Å—Ç: `.//*[@itemprop="text"]`
- –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ: `.//img[@itemprop="url"]`
- –†–µ–∑—É–ª—å—Ç–∞—Ç: **3 —à–∞–≥–∞** –Ω–∞–π–¥–µ–Ω–æ ‚úÖ

#### ‚úÖ parseNutrition()
- –ö–∞–ª–æ—Ä–∏–∏: `itemprop="calories"` ‚Üí **89 –∫–∫–∞–ª** ‚úÖ
- –ë–µ–ª–∫–∏: `itemprop="proteinContent"`
- –ñ–∏—Ä—ã: `itemprop="fatContent"`
- –£–≥–ª–µ–≤–æ–¥—ã: `itemprop="carbohydrateContent"`

#### ‚úÖ parseTotalTime()
- XPath: `//meta[@itemprop="totalTime"]/@content`
- –§–æ—Ä–º–∞—Ç: ISO 8601 (PT10M = 10 –º–∏–Ω—É—Ç) ‚úÖ

#### ‚úÖ downloadImage()
- –ò—Å—Ç–æ—á–Ω–∏–∫: `og:image` (itemprop="image" –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç)
- CDN: `https://cdn.food.ru/...` ‚úÖ

#### ‚úÖ parseCategories()
- –ò—Å—Ç–æ—á–Ω–∏–∫: –Ω–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å—Å—ã–ª–∫–∏ `//nav//a[contains(@href, "/recipes/")]`
- –ò—Å–∫–ª—é—á–µ–Ω–∏—è: "–î–æ—Å—Ç—É–ø–Ω—ã–π –ó–û–ñ", "–ë–∞–∑–æ–≤—ã–π —É—Ä–æ–≤–µ–Ω—å", "–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π —É—Ä–æ–≤–µ–Ω—å"

---

## üîç –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ food.ru

### 1. –†–µ–≥–∏—Å—Ç—Ä –∞—Ç—Ä–∏–±—É—Ç–æ–≤
**–ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û:** –ü–æ—Å–ª–µ `loadHTML()` –≤—Å–µ –∞—Ç—Ä–∏–±—É—Ç—ã —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è **—Å—Ç—Ä–æ—á–Ω—ã–º–∏**:
- ‚ùå `itemProp` ‚Üí ‚úÖ `itemprop`
- ‚ùå `itemType` ‚Üí ‚úÖ `itemtype`

### 2. –ü–∞–≥–∏–Ω–∞—Ü–∏—è
- –°—Ç—Ä–∞–Ω–∏—Ü–∞ 1: `https://food.ru/recipes/salaty` (–ë–ï–ó ?page=1)
- –°—Ç—Ä–∞–Ω–∏—Ü–∞ 2+: `https://food.ru/recipes/salaty?page=2`

### 3. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö
Food.ru –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Schema.org —Ä–∞–∑–º–µ—Ç–∫—É:
```html
<!-- –ò–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã -->
<tr itemprop="recipeIngredient" class="ingredient">
  <span class="name">–°–∏—Ä–æ–ø —Ç–æ–ø–∏–Ω–∞–º–±—É—Ä–∞</span>
  <span class="value">200</span>
  <span class="type">–≥</span>
</tr>

<!-- –®–∞–≥–∏ -->
<div itemtype="https://schema.org/HowToStep">
  <div itemprop="text">–ù–∞—Ä–µ–∂—å—Ç–µ —Ç–æ–ø–∏–Ω–∞–º–±—É—Ä –º–µ–ª–∫–æ–π —Å–æ–ª–æ–º–∫–æ–π.</div>
  <img itemprop="url" src="https://cdn.food.ru/...">
</div>
```

---

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### RecipeListParserService
```bash
$ php test-list-parser.php
‚úÖ –ù–∞–π–¥–µ–Ω–æ —Ä–µ—Ü–µ–ø—Ç–æ–≤: 40
‚úÖ –°—Ç—Ä–∞–Ω–∏—Ü–∞ 2: –Ω–∞–π–¥–µ–Ω–æ 40 —Ä–µ—Ü–µ–ø—Ç–æ–≤
```

### RecipeParserService
```bash
$ php test-final.php
ü•ò –ò–ù–ì–†–ï–î–ò–ï–ù–¢–´: 7
   1. –°–∏—Ä–æ–ø —Ç–æ–ø–∏–Ω–∞–º–±—É—Ä–∞ - 200 –≥
   2. –ú–∞—Ä–∏–Ω–æ–≤–∞–Ω–Ω—ã–µ –æ–≥—É—Ä—Ü—ã - 150 –≥
   3. –ú–∞—Ä–∏–Ω–æ–≤–∞–Ω–Ω—ã–µ —à–∞–º–ø–∏–Ω—å–æ–Ω—ã - 280 –≥
   4. –ö—Ä–∞—Å–Ω—ã–π –ª—É–∫ - 75 –≥
   5. –†–∞—Å—Ç–∏—Ç–µ–ª—å–Ω–æ–µ –º–∞—Å–ª–æ - –ø–æ –≤–∫—É—Å—É

üìã –®–ê–ì–ò: 3
   –®–∞–≥ 1: –ù–∞—Ä–µ–∂—å—Ç–µ —Ç–æ–ø–∏–Ω–∞–º–±—É—Ä –º–µ–ª–∫–æ–π —Å–æ–ª–æ–º–∫–æ–π...
   –®–∞–≥ 2: –ü–æ—Ä—É–±–∏—Ç–µ –º–∞—Ä–∏–Ω–æ–≤–∞–Ω–Ω—ã–µ –æ–≥—É—Ä—Ü—ã –º–µ–ª–∫–∏–º–∏ –∫—É–±–∏–∫–∞–º–∏...
   –®–∞–≥ 3: –ù–∞—à–∏–Ω–∫—É–π—Ç–µ –ª—É–∫ —Ç–æ–Ω–∫–∏–º–∏ –ø–æ–ª—É–∫–æ–ª—å—Ü–∞–º–∏...

üç¥ –ü–ò–¢–ê–¢–ï–õ–¨–ù–û–°–¢–¨:
   –ö–∞–ª–æ—Ä–∏–∏: 89 –∫–∫–∞–ª
   –ë–µ–ª–∫–∏: 0 –≥
   –ñ–∏—Ä—ã: 0 –≥
   –£–≥–ª–µ–≤–æ–¥—ã: 21 –≥

‚úÖ –í–°–Å –†–ê–ë–û–¢–ê–ï–¢ –û–¢–õ–ò–ß–ù–û!
```

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –°—Ç–∞—Ç—É—Å | –¢–µ—Å—Ç—ã |
|-----------|--------|-------|
| RecipeListParserService | ‚úÖ 100% | PASSED |
| RecipeParserService | ‚úÖ 100% | PASSED |
| –ò–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | 7/7 |
| –®–∞–≥–∏ | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | 3/3 |
| –ü–∏—Ç–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | 89 –∫–∫–∞–ª |
| –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | og:image |
| –ö–æ–¥–∏—Ä–æ–≤–∫–∞ UTF-8 | ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ | ‚úì |

---

## üöÄ –ì–æ—Ç–æ–≤–æ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É!

–û–±–∞ –ø–∞—Ä—Å–µ—Ä–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–¥–µ–ª–∞–Ω—ã –ø–æ–¥ food.ru –∏ **—É—Å–ø–µ—à–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã**.

### –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –∑–∞–ø—É—Å–∫–∞:
```bash
# –ü–∞—Ä—Å–∏–Ω–≥ —Ä–µ—Ü–µ–ø—Ç–æ–≤ –∏–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
php artisan parse:recipes

# –ò–ª–∏ —á–µ—Ä–µ–∑ tinker
php artisan tinker
>>> $service = new \App\Services\RecipeListParserService();
>>> $recipes = $service->parseRecipesList('salaty', 1);
>>> $parser = new \App\Services\RecipeParserService();
>>> $recipe = $parser->parseRecipe('https://food.ru/recipes/263813-salat-osennii-den');
```

---

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

1. **getAttribute() warnings**: –õ–∏–Ω—Ç–µ—Ä –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç warnings - —ç—Ç–æ –ª–æ–∂–Ω—ã–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è, –≤ runtime –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç
2. **–ü–µ—Ä–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞**: –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ë–ï–ó `?page=1`
3. **–†–µ–≥–∏—Å—Ç—Ä –∞—Ç—Ä–∏–±—É—Ç–æ–≤**: –¢–æ–ª—å–∫–æ —Å—Ç—Ä–æ—á–Ω—ã–µ –±—É–∫–≤—ã –≤ XPath –ø–æ—Å–ª–µ loadHTML()
4. **CDN –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π**: food.ru –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `cdn.food.ru`

---

**–î–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:** 5 –Ω–æ—è–±—Ä—è 2025 –≥.  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–û–¢–û–í–û –ö –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Æ
